{"version":3,"sources":["webpack://CWD_LocalList/webpack/bootstrap","webpack://CWD_LocalList/./js/app.js","webpack://CWD_LocalList/./js/buildEvent.js","webpack://CWD_LocalList/./js/service/local-list.js","webpack://CWD_LocalList/./js/service/request.js","webpack://CWD_LocalList/./js/templates/calendar.js","webpack://CWD_LocalList/./js/templates/compact.js","webpack://CWD_LocalList/./js/templates/modernCompact.js","webpack://CWD_LocalList/./js/templates/modernStandard.js","webpack://CWD_LocalList/./js/templates/standard.js","webpack://CWD_LocalList/./js/templates/template-helpers.js"],"names":["service","module","exports","run","args","LL","LocalList","renderEvents","depts","entries","format","group","target","title","heading","api","pref_excerpt_length","pref_excerpt_length_compact","pref_allow_rich","pref_readmore","pref_eventdetails","pref_category","pref_category_filters","pref_date_headers","singleday","keyword","addCal","wrapperArgs","filters","requestArgs","BE_args","supports_rich","supports_direction","parseFloat","addThrobber","innerTemplate","standardInner","outerTemplate","standardWrapper","compactInner","compactWrapper","calendarInner","calendarWrapper","modernCompactInner","modernCompactWrapper","moderStandardInner","modernStandardWrapper","console","log","getAndBuildList","loadingNode","document","getElementById","insertAdjacentHTML","c_loader","setTimeout","classList","remove","findAll","then","buildEventsList","eventsObj","catch","error","myObj","inner","events","forEach","event","builtEvent","BuildEvent","type","event_types","name","id","department","departments","group_name","group_id","html","clearTimeout","innerHTML","description","month_array","month_array_abb","day_array","day_array_abb","event_time","event_date_compact","event_date","displayDate","abbrDay","fullDay","abbrMonth","month","day","monthHeader","event_time_end","ticket_cost","setTruncDesc","setDateTime","setOptionFields","setEventType","setTicketCost","setTimeEnd","event_fulldate","Date","event_instances","event_instance","start","event_day","getDay","split","convertTime","year","replace","setDisplayDate","all_day","excerpt_length","length","trim","substring","slice","join","description_text","end","time","time_hour","time_min","parseInt","pref_archive_range","pref_days","pref_distinct","today","today_month","getMonth","today_year","getFullYear","past_year","past_month","addLeadingZero","num","toString","start_results","getDate","end_results","query","api_key","days","distinct","pp","direction","formatParams","params","Object","keys","map","key","encodeURIComponent","url","method","dataType","crossDomain","data","retData","JSON","parse","Promise","resolve","reject","xhr","XMLHttpRequest","open","obj","headers","setRequestHeader","onload","status","response","statusText","onerror","send","body","localist_url","location_name","innerHtml","builtData","tagStr","spanStr","element","checkDate","CheckDate","lastMonth","lastDay","eventFilters","filterObjs","toggleFilters","allFilterBtns","getElementsByClassName","value","elem","add","allEvents","targetElems","showAllEvents","window","index","add_calender","myEvent","buidGoogleStr","mySD","gDateStart","myED","last_date","gDateStop","location","buildiCal","localist_ics_url","buildOutlookCal"],"mappings":"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","file":"cwd_events.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/app.js\");\n","import * as service from \"./service/local-list\";\r\nimport { BuildEvent } from \"./buildEvent\";\r\nimport {standardInner, standardWrapper} from \"./templates/standard\"\r\nimport { compactInner, compactWrapper} from \"./templates/compact\";\r\nimport { calendarInner, calendarWrapper} from \"./templates/calendar\";\r\nimport { modernCompactInner, modernCompactWrapper} from \"./templates/modernCompact\";\r\nimport { moderStandardInner, modernStandardWrapper} from \"./templates/modernStandard\";\r\n\r\n//expose the localList via run function\r\nmodule.exports = {\r\n    run: function (args) {\r\n        let LL = new LocalList(args);\r\n        /*\r\n         add custom templates here:\r\n         localList.innerTemplate = (data)=>`<p>${data.event.title}</p>`;\r\n         build the outer wrapper at a minimum this must contain innerHtml\r\n         localList.outerTemplate = (innerHTML, args)=>`<h2>${args.heading}</h2>${innerHTML}`;\r\n         */\r\n        LL.renderEvents();\r\n    }\r\n}\r\n\r\n/*LoacalList typical usage\r\n\r\nconst settings = { 'format':'standard', 'entries':20, 'heading':'My Local List',  'addCal': true};\r\nlet localList = new LocalList( settings ).renderEvents();\r\nor with custom template \r\nlet localList = new LocalList()\r\n//define inner template list of events\r\nlocalList.innerTemplate = (data)=>`<p>${data.event.title}</p>`;\r\n//build the outer wrapper at a minimum this must contain innerHtml\r\nlocalList.outerTemplate = (innerHTML, args)=>`<h2>${args.heading}</h2>${innerHTML}`;\r\nlocalList.renderEvents();\r\n\r\nor with calendar\r\n\r\nconst settings = { target:'events-listing', depts:0, entries:10, format:'calendar', group:0, singleday:false, keyword:'Small Farms Program'};\r\nlet localList = new LocalList( settings ).renderEvents();\r\n*/\r\nclass LocalList{\r\n    // define the following arguments\r\n    constructor({\r\n            depts=0, \r\n            entries=10, \r\n            format='standard', \r\n            group=0,\r\n            target = \"events-listing\", //the id of the HTML target element\r\n            title = \"Events List\", //the section title of the wrapper\r\n            heading = 'Events', //the h3 displayed heading\r\n            api = '2.1', // Localist API version (e.g., '2' for the latest 2.x, '2.1' for the specific point release) \r\n            pref_excerpt_length = 250, // use 0 for no truncation, using truncation will force descriptions to plaintext\r\n            pref_excerpt_length_compact = 125, // excerpt length can be made shorter for 'compact' mode\r\n            pref_allow_rich = true, // setting to false will force plaintext descriptions (only affects api 2.1 or later)\r\n            pref_readmore = 'read more', // label for \"read more\" links at the end of truncated excerpts \r\n            pref_eventdetails = 'event details', // label for \"event details\" toggle buttons\r\n            pref_category = 'group', // the event \"type\" label can be replaced with other localist values to act as custom categorization (currently supports: 'type','dept','group')\r\n            pref_category_filters = true,\r\n            pref_date_headers = true,\r\n            singleday=false, \r\n            keyword=false,\r\n            addCal = false //add to google/outlook/ical options\r\n        }) {\r\n        //console.log(arguments);\r\n        // local variables arguments \r\n        //used in filters\r\n        this.pref_category = pref_category;\r\n        this.pref_category_filters = pref_category_filters;\r\n\r\n        this.target = target;\r\n        this.format = format;\r\n\r\n        //standard wrapper variables \r\n        this.wrapperArgs = {};\r\n        this.wrapperArgs.title = title; \r\n        this.wrapperArgs.heading = heading;\r\n        this.wrapperArgs.filters = {};\r\n\r\n        //required by service findall to request localist data\r\n        this.requestArgs = {};\r\n        this.requestArgs.depts=depts;\r\n        this.requestArgs.entries=entries;\r\n        this.requestArgs.format=format; \r\n        this.requestArgs.group=group;   \r\n        this.requestArgs.singleday=singleday;\r\n        this.requestArgs.keyword=keyword;     \r\n        this.requestArgs.api = api;\r\n        this.requestArgs.pref_allow_rich = pref_allow_rich;\r\n                \r\n        // build event variables required for inner HTML logic \r\n        this.BE_args = {};\r\n        this.BE_args.supports_rich = false;\r\n        this.BE_args.supports_direction = false;\r\n        this.BE_args.pref_date_headers = pref_date_headers;\r\n        this.BE_args.pref_excerpt_length = pref_excerpt_length;\r\n        this.BE_args.pref_excerpt_length_compact = pref_excerpt_length_compact;   \r\n        this.BE_args.pref_readmore = pref_readmore;    \r\n        this.BE_args.pref_eventdetails = pref_eventdetails;   //is this used?\r\n        this.BE_args.addCal = addCal;\r\n        if (parseFloat(api) >= 2.1) {\r\n            this.BE_args.supports_rich = true; // rich text descriptions (HTML) were added in API 2.1\r\n            this.BE_args.supports_direction = true; // \"direction\" (asc/desc) was added in API 2.1\r\n        }   \r\n    }\r\n\r\n    renderEvents(){\r\n        //add the loading throbber\r\n        this.addThrobber( this.target );\r\n        //test  to see if custom templates are defined\r\n        if ( !('innerTemplate' in this) && !('outerTemplate' in this)){\r\n            //if not set format of template\r\n            this.innerTemplate = standardInner;\r\n            this.outerTemplate = standardWrapper;\r\n            switch(this.format) {\r\n                case 'standard':\r\n                    this.innerTemplate = standardInner;\r\n                    this.outerTemplate = standardWrapper;\r\n                    break;\r\n                case 'compact':\r\n                    this.innerTemplate = compactInner;\r\n                    this.outerTemplate = compactWrapper;\r\n                    break;\r\n                case 'inline_compact':\r\n                    this.innerTemplate = calendarInner;\r\n                    this.outerTemplate = calendarWrapper;\r\n                    break; \r\n                case 'modern_compact':\r\n                    this.BE_args.pref_excerpt_length = 125;\r\n                    this.innerTemplate = modernCompactInner;\r\n                    this.outerTemplate = modernCompactWrapper;\r\n                    break;  \r\n                case 'modern_standard':\r\n                    this.innerTemplate = moderStandardInner;\r\n                    this.outerTemplate = modernStandardWrapper;\r\n                    break;                                                            \r\n                default:\r\n                    //console.warn(\"Warning: no format was defined using fallback standard\");\r\n            }     \r\n        }else{\r\n            console.log('using custom templates');\r\n        }\r\n        //fetch localist events and build the event nodes\r\n        this.getAndBuildList( );\r\n    }\r\n\r\n    /* \r\n        inserts throbber after target elem\r\n        this is deleted on localList render\r\n     */\r\n    addThrobber( target ){\r\n        const loadingNode = '<div id=\"loader\" class=\"fadeOut\"><span class=\"fa fa-spin fa-cog\"></span></div>';\r\n        document.getElementById(target).insertAdjacentHTML('afterbegin', loadingNode);\r\n        this.c_loader = setTimeout(function(){ \r\n                document.getElementById('loader').classList.remove('fadeOut'); \r\n            }, 200); // skip loading animation if under 0.5s\r\n    }\r\n\r\n    /* get the events */\r\n    getAndBuildList( ){\r\n        service.findAll( this.requestArgs  )\r\n            .then(eventsObj => {\r\n                this.buildEventsList( eventsObj );\r\n            })\r\n            .catch(error => console.log(error));\r\n    }\r\n\r\n    buildEventsList( myObj ){\r\n        let inner = '';\r\n        //loop through each event () => required to give access to 'this'\r\n        myObj.events.forEach( (event) => {\r\n            //built event provides common functions to format the data\r\n            let builtEvent = new BuildEvent(event.event, this.BE_args);\r\n           //console.log( builtEvent );\r\n            //build the filters array does not support multiple filter entries [0]only\r\n            if (this.pref_category_filters) {\r\n                if (this.pref_category == 'type' && builtEvent.type != 0) {\r\n                    this.wrapperArgs.filters[event.filters.event_types[0].name]={\r\n                        'id':event.filters.event_types[0].id,\r\n                        'name': event.filters.event_types[0].name,\r\n                        'pref_category':pref_category\r\n                    };\r\n                }\r\n                else if (this.pref_category == 'dept' && builtEvent.department != 0) {\r\n                    this.wrapperArgs.filters[event.filters.departments[0].name]= {\r\n                        'id':event.filters.departments[0].id,\r\n                        'name':event.filters.departments[0].name,\r\n                        'pref_category':pref_category\r\n                    };\r\n                }\r\n                else if (this.pref_category == 'group' && builtEvent.group_name != '') {   \r\n                    this.wrapperArgs.filters[builtEvent.group_name]= {\r\n                        'id':builtEvent.group_id,\r\n                        'name':builtEvent.group_name,\r\n                        'pref_category':this.pref_category\r\n                    };               \r\n                }\r\n            }\r\n\r\n            inner += this.innerTemplate( builtEvent );\r\n\r\n        });\r\n\r\n        let html = this.outerTemplate(inner, this.wrapperArgs);\r\n      \r\n        //remove loading animation timer\r\n        clearTimeout(this.c_loader);\r\n        //the loader is replaced by html\r\n        //document.getElementById('loader').classList.remove('fadeIn'); \r\n        document.getElementById(this.target).innerHTML = html;\r\n    }\r\n}","export class BuildEvent{\r\n    constructor( event, args ) {\r\n        this.event = event;\r\n        this.description = event.description;\r\n        this.args = args;\r\n        this.format = args.format\r\n        this.addCal = args.addCal;\r\n        this.pref_eventdetails = args.pref_eventdetails;\r\n        this.pref_readmore = args.pref_readmore;\r\n\r\n        //date time variables\r\n        this.month_array = ['January','February','March','April','May','June','July','August','September','October','November','December'];\r\n        this.month_array_abb = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\r\n        this.day_array = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];\r\n        this.day_array_abb = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];\r\n        this.event_time;\r\n        this.event_date_compact;\r\n        this.event_date;\r\n        this.displayDate;\r\n        this.abbrDay;\r\n        this.fullDay;\r\n        this.abbrMonth;\r\n        this.month;\r\n        this.day;\r\n        this.monthHeader;//month + year\r\n\r\n        //the truncated description\r\n        this.description;\r\n\r\n        //options\r\n        this.department = 0;\r\n        this.type = 0;\r\n        this.group_name = '';\r\n        this.group_id = 0;\r\n        this.event_types = '';\r\n\r\n        this.event_time_end = '';\r\n\r\n        this.ticket_cost = '';\r\n\r\n        //setters\r\n        this.setTruncDesc();\r\n        this.setDateTime();\r\n        this.setOptionFields();\r\n        this.setEventType();\r\n        this.setTicketCost();\r\n        this.setTimeEnd();\r\n    }//END OF CONSTRUCTOR\r\n\r\n    setDateTime(){\r\n        let event = this.event;\r\n        // date and time\r\n        var event_fulldate = new Date(event.event_instances[0].event_instance.start);\r\n        var event_day = this.day_array_abb[event_fulldate.getDay()];\r\n        var event_date = event.event_instances[0].event_instance.start.split('T')[0];\r\n        this.event_time = event.event_instances[0].event_instance.start.split('T')[1];\r\n        this.event_time = convertTime(this.event_time); // convert to 12-hour format\r\n        var year = event_date.split('-')[0];\r\n        var month = event_date.split('-')[1].replace(/\\b0+/g, ''); // remove leading zeroes\r\n        var day = event_date.split('-')[2].replace(/\\b0+/g, ''); // remove leading zeroes\r\n        var event_date = month+'/'+day+'/'+year; // convert date format\r\n        //event_date_compact = month+'/'+day; // for compact mode (numbers only, e.g., \"4/13\")\r\n        this.event_date_compact = this.month_array_abb[month-1]+' '+day; // for compact mode (month text, e.g., \"Apr 13\")\r\n        this.event_date = this.month_array[month-1]+' '+day;\r\n        this.displayDate = this.setDisplayDate(event_date, this.event_date_compact);\r\n        if (event.event_instances[0].event_instance.all_day) {\r\n            this.event_time = 'all day';\r\n        }\r\n        this.abbrDay = event_day;\r\n        this.abbrMonth = this.month_array_abb[month-1];\r\n        this.month=this.month_array[month-1];\r\n        this.fullDay = this.day_array[event_fulldate.getDay()];\r\n        this.day = day;\r\n        this.monthHeader = this.month+' '+year;\r\n    };\r\n\r\n    //set date time helper\r\n    setDisplayDate(event_date, event_date_compact ){\r\n        let pref_date_headers = this.args.pref_date_headers\r\n        if ( pref_date_headers || this.format == 'compact') {\r\n            if (this.format == 'compact') {\r\n                return event_date_compact;\r\n            }\r\n            return event_date;\r\n        }else{\r\n            console.log(\"warning no date headers\");\r\n            console.log( event_date_compact );\r\n        }\r\n    }    \r\n\r\n    setTruncDesc(){\r\n        let event = this.event;\r\n        let excerpt_length = this.args.pref_excerpt_length;\r\n        if (this.format == 'compact') {\r\n            excerpt_length = this.args.pref_excerpt_length_compact;\r\n        }\r\n        \r\n        if (!this.args.supports_rich) {\r\n            if (excerpt_length > 0 && event.description.length > excerpt_length) {\r\n                this.description = event.description.trim().substring(0, excerpt_length).split(' ').slice(0, -1).join(' ');\r\n                //console.log(description)\r\n            }\r\n            else {\r\n                this.description = event.description;\r\n            }\r\n        }\r\n        else {\r\n            if (excerpt_length > 0) {\r\n                if (event.description_text.length > excerpt_length) {\r\n                    this.description = event.description_text.trim().substring(0, excerpt_length).split(' ').slice(0, -1).join(' ');\r\n                    //console.log(this.description)\r\n                }\r\n                else {\r\n                    this.description = event.description_text;\r\n                }\r\n                // TODO: add support for Rich Text (HTML) truncation\r\n            }\r\n            else {\r\n                if (this.args.pref_allow_rich) {\r\n                    this.description = event.description;\r\n                }\r\n                else {\r\n                    this.description = event.description_text;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    setOptionFields(){\r\n        let event = this.event;\r\n        // optional fields\r\n        if (typeof event.filters.departments !== 'undefined') {\r\n            this.department = event.filters.departments[0].id; // TODO: add support for multiple departments per event ( departments[1+] )\r\n        }\r\n        if (typeof event.filters.event_types !== 'undefined') {\r\n            this.type = event.filters.event_types[0].id; // TODO: add support for multiple types per event per event ( event_types[1+] )\r\n        }\r\n        if (typeof event.group_name !== 'undefined') {\r\n            this.group_name = event.group_name;\r\n            this.group_id = event.group_id;\r\n        }\r\n    };\r\n\r\n    setEventType(){\r\n        let event = this.event;\r\n        if (typeof event.filters.event_types !== 'undefined') {\r\n            this.event_types = event.filters.event_types[0].name;\r\n        }\r\n        if (this.args.pref_category == 'dept' && this.department != 0) {\r\n            this.event_types = event.filters.departments[0].name;\r\n        }\r\n        if (this.args.pref_category == 'group' && this.group_name != '') {\r\n            this.event_types = this.group_name;\r\n        }\r\n    };\r\n\r\n    setTimeEnd(){\r\n        let event = this.event;\r\n        if (typeof event.event_instances[0].event_instance.end !== 'undefined' && event.event_instances[0].event_instance.end != null) {\r\n            this.event_time_end = event.event_instances[0].event_instance.end.split('T')[1];\r\n            this.event_time_end = convertTime(this.event_time_end); // convert to 12-hour format\r\n        }      \r\n    };\r\n\r\n    setTicketCost(){\r\n        let event = this.event;\r\n        if (typeof event.ticket_cost !== 'undefined') {\r\n            this.ticket_cost = event.ticket_cost;\r\n        }\r\n    };\r\n\r\n}\r\n\r\n/* helper function */\r\nlet convertTime = (time) => {\r\n    let time_hour = time.split(':')[0];\r\n    let time_min = time.split(':')[1];\r\n    if (parseInt(time_hour) >= 12) {\r\n        if (parseInt(time_hour) > 12) {\r\n            time_hour = (parseInt(time_hour) - 12);\r\n        }\r\n        return time_hour + ':' + time_min + ' p.m.';\r\n    }\r\n    else {\r\n        return parseInt(time_hour) + ':' + time_min + ' a.m.';\r\n    }\r\n}","import request from './request';\r\n\r\n\r\nexport let findAll = (\r\n        {depts=0, entries=3, format='standard', group=0, singleday=false, keyword=false, api='2.1'}\r\n    ) => {    \r\n    /* More Params */\r\n    // calculate date ranges (including archive options)\r\n    const pref_archive_range = 6; \r\n    var pref_days = 365; // range of days to retrieve (overridden by \"singleday\" requests)\r\n    const pref_distinct = true; // controls the \"distinct\" filter for the events query ('true' only returns one instance of a repeating event)\r\n    const today = new Date();\r\n    const today_month = today.getMonth();\r\n    const today_year = today.getFullYear();\r\n    var past_year = today_year;\r\n    var past_month = today_month - pref_archive_range; // past x months (legacy API 2.0)\r\n    if (past_month < 0) {\r\n        past_month += 12;\r\n        past_year -= 1;\r\n    }\r\n\r\n    //helper function\r\n    const addLeadingZero = (num) => {\r\n        if (num.toString().length == 1) {\r\n            num = '0'+num;\r\n        }\r\n        return num;\r\n    }\r\n\r\n    var start_results = today.getFullYear() + '-' + addLeadingZero(parseInt(today.getMonth()+1)) + '-' + addLeadingZero(today.getDate());\r\n    var end_results = parseInt(today.getFullYear()+1) + '-' + addLeadingZero(parseInt(today.getMonth()+1)) + '-' + addLeadingZero(today.getDate()); // 'end_results' is only used for archive mode in legacy API 2.0\r\n    if (format == 'archive') {\r\n        end_results = start_results;\r\n        if (supports_direction) {\r\n            start_results = (today.getFullYear()-1) + '-' + addLeadingZero(parseInt(today.getMonth()+1)) + '-' + addLeadingZero(today.getDate());\r\n        }\r\n        else { // legacy API 2.0\r\n            start_results = past_year + '-' + addLeadingZero(parseInt(past_month+1)) + '-' + addLeadingZero(today.getDate());\r\n        }\r\n    }\r\n                \r\n    // single day option\r\n    if (singleday) {\r\n        start_results = singleday;\r\n        pref_days = 1;\r\n    }   \r\n     \r\n    let query = {\r\n        api_key: 'KLhy2GtuSAGirYGY',\r\n        days: pref_days,\r\n        distinct: pref_distinct,\r\n        pp: entries,\r\n        start: start_results,        \r\n    };\r\n    \r\n    if (depts && depts != 0) {\r\n        query.type = depts;\r\n    }\r\n    if (group != 0) {\r\n        query.group_id = group;\r\n    }\r\n    if (keyword && keyword != '') {\r\n        query.keyword = keyword;\r\n    }\r\n    if (format == 'archive' && !supports_direction) {\r\n        query.end = end_results; // legacy API 2.0\r\n    } else {\r\n        query.days = pref_days;\r\n    }\r\n    if (format == 'archive' && supports_direction) {\r\n        query.direction = 'desc';\r\n    }    \r\n    //Get helper function\r\n    const formatParams = (params) => {\r\n        return \"?\" + Object\r\n              .keys(params)\r\n              .map(function(key){\r\n                return key+\"=\"+encodeURIComponent(params[key])\r\n              })\r\n              .join(\"&\")\r\n      } \r\n    var url = '//events.cornell.edu/api/'+api+'/events'+formatParams(query);   \r\n   // return request({url:\"testData.json\"})\r\n   return request({\r\n            url: url,\r\n            method: \"GET\",\r\n\t\t\tdataType: 'jsonp',\r\n\t\t\tcrossDomain: true,\r\n\t\t\tdata: query,            \r\n        }).then(retData => retData = JSON.parse(retData))\r\n\r\n}\r\n\r\n\r\n\r\n","// XMLHttpRequest wrapper using callbacks\r\nexport default obj => { \r\n    return new Promise((resolve, reject) => {\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open(obj.method || \"GET\", obj.url);\r\n        if (obj.headers) {\r\n            Object.keys(obj.headers).forEach(key => {\r\n                console.log( key, obj.headers[key] )\r\n                xhr.setRequestHeader(key, obj.headers[key]);\r\n            });\r\n        }\r\n        xhr.onload = () => {\r\n            if (xhr.status >= 200 && xhr.status < 300) {\r\n                resolve(xhr.response);\r\n            } else {\r\n                reject(xhr.statusText);\r\n            }\r\n        };\r\n        xhr.onerror = () => reject(xhr.statusText);\r\n        xhr.send(obj.body);\r\n    });\r\n};","export const calendarInner = (builtEvent)=>`\r\n        <div class=\"views-row\">  \r\n        <div class=\"container-fluid\"> \r\n        <div class=\"row\"> \r\n        <div class=\"col-sm-2 event-month-and-day\"> \r\n        <div> \r\n            <span class=\"event-month\">${builtEvent.abbrMonth}</span> \r\n            <span class=\"event-day\">${builtEvent.abbrDay}</span> \r\n        </div> \r\n        </div> \r\n        <div class=\"col-sm-8 event-title-and-location\"> \r\n        <div class=\"event-title\"> \r\n            <a href=\"${builtEvent.event.localist_url}\" hreflang=\"en\">'${builtEvent.event.title}'</a> \r\n        </div> \r\n        <div class=\"event-times\"> \r\n            <span class=\"fa fa-clock-o\"></span>${builtEvent.event_time}${builtEvent.event_time_end ? ` - ${builtEvent.event_time_end}` : ''}\r\n        </div> \r\n        <div class=\"event-location\"> \r\n        ${builtEvent.event.location_name ? `<span class=\"fa fa-map-marker\"></span>${builtEvent.event.location_name}` : ''}  \r\n        </div> \r\n        </div> \r\n        </div>  \r\n        </div> \r\n        </div>`;\r\n\r\nexport const calendarWrapper = (innerHtml, args)=>`\r\n    <section title=\"${args.title}\">\r\n        <h2 class=\"block-title\">${args.heading}</h2>\r\n        <div class=\"events-listing no-thumbnails\" id=\"events-listing\">\r\n            ${innerHtml}\r\n        </div>\r\n    </section>`;","import {eventFilters, add_calender} from './template-helpers';\r\n\r\nexport const compactInner=(builtData)=>`\r\n    <div class=\"event-node node dept-${builtData.department} type-${builtData.type} group-${builtData.group_id}\">\r\n    <h3><a target=\"_blank\" href=\"${builtData.event.localist_url}\">${builtData.event.title}</a></h3>\r\n    <h4 class=\"meta date\"><span class=\"fulldate\">${builtData.event_date_compact}</span> \r\n    <h4 class=\"meta location\">${builtData.event.location_name}</h4>\r\n    <p class=\"description\">${builtData.description} \r\n    <a class=\"read-more more\" href=\"${builtData.event.localist_url}\" target=\"_blank\">${builtData.pref_readmore}</a>\r\n    </p>\r\n    ${builtData.addCal ? `${add_calender(builtData.event)}` : ''}  \r\n    </div><!--end of node -->\r\n    `;\r\n//this has class compact only difference\r\nexport const compactWrapper = (inner, args) => `\r\n    <section title=\"${args.title}\">\r\n        <h2>${args.heading}</h2>\r\n        <div id=\"main-body\">  \r\n            <div class=\"events-listing no-thumbnails\" id=\"events-listing compact\">\r\n                ${eventFilters(args.filters)}\r\n                <div class=\"events-list\">\r\n                    ${inner}\r\n                </div>\r\n            </div><!--events listing -->\r\n        </div><!-- main-body -->\r\n    </section><!--end of section -->`;","export const modernCompactInner = ( builtData )=> `<div class=\"card\">\r\n<div class=\"events\">\r\n    <a href=\"${builtData.event.localist_url}\" class=\"group-link-wrapper field-group-link\">\r\n        <time title=\"${builtData.event_date}\" datetime=\"${builtData.displayDate}\">\r\n            <month>${builtData.abbrMonth}</month>\r\n            <day>${builtData.day}</day>\r\n        </time>\r\n        <div class=\"field title\">\r\n            <h3>${builtData.event.title}</h3>\r\n        </div>\r\n        <div class=\"field meta\">\r\n            <p>${builtData.event_time}, ${builtData.event.location_name}</p>\r\n        </div>\r\n        <div class=\"field field-name-summary summary\">\r\n            <p>${builtData.description}...</p>\r\n        </div>\r\n    </a>\r\n</div>\r\n</div>`;\r\n\r\n//this has class compact only difference\r\nexport const modernCompactWrapper = (inner, args) => `\r\n    <div class=\"secondary\">\r\n         ${args.heading ? `<h2>${args.heading}</h2>` : ''}\r\n        <div class=\"cwd-component cwd-card-grid three-card singles compact no-thumbnails\"> \r\n            <div id=\"cwd-homeEvents-list\" class=\"compact no-thumbnails\">\r\n                <!--no filters -->\r\n                <div class=\"events-list\">\r\n                    ${inner}\r\n                </div>\r\n            </div><!--events listing -->\r\n        </div><!-- main-body -->\r\n    </div><!--end of section -->`;","import {eventFilters, add_calender} from './template-helpers';\r\nexport const moderStandardInner = (builtData) =>`<div class=\"card event-node dept-${builtData.department} type-${builtData.type} group-${builtData.group_id}\" >\r\n                            <div class=\"events\">\r\n                                <a href=\"${builtData.event.localist_url}\" class=\"group-link-wrapper field-group-link\">\r\n                                <time title=\"${builtData.event_date}\" datetime=\"${builtData.displayDate}\">\r\n                                    <month>${builtData.abbrMonth}</month>\r\n                                    <day>${builtData.day}</day>\r\n                                    </time>\r\n                                    <div class=\"field title\">\r\n                                    <h3>${builtData.event.title}</h3>\r\n                                    </div>\r\n                                    <div class=\"field meta\">\r\n                                        <p>${builtData.event_time}, ${builtData.event.location_name} ${tagStr(builtData.event.filters.event_types)}</p>\r\n                                    </div>\r\n                                    <div class=\"field field-name-summary summary\">\r\n                                        <p>${builtData.description}... read more</p> \r\n                                    </div>\r\n                                </a>\r\n                                ${builtData.addCal ? `${add_calender(builtData.event)}` : ''}  \r\n                            </div>\r\n                        </div>`;\r\n\r\nexport const modernStandardWrapper = (inner, args) => `\r\n    <section title=\"${args.title}\">\r\n        ${args.heading ? `<h2>${args.heading}</h2>` : ''}\r\n        <div>  \r\n            <div class=\"cwd-component cwd-card-grid three-card singles events-listing no-thumbnails\" id=\"events-listing\">\r\n                ${eventFilters(args.filters)}\r\n                <div class=\"events-list\">\r\n                    ${inner}\r\n                </div>\r\n            </div><!--events listing -->\r\n        </div><!-- main-body -->\r\n    </section><!--end of section -->`;\r\n\r\nconst tagStr = (event_types) => {\r\n    let spanStr = ''\r\n    if (event_types){\r\n            event_types.forEach(element => {\r\n                spanStr  += '<span class=\"inline-events-type\">'+element.name+'</span>';\r\n        })\r\n    }\r\n    return spanStr;\r\n}","import {eventFilters, add_calender} from './template-helpers';\r\n\r\nexport const standardInner = (builtData) => `\r\n    ${checkDate.month(builtData)}\r\n    ${checkDate.day(builtData)}\r\n    <div class=\"event-node node dept-${builtData.department} type-${builtData.type} group-${builtData.group_id}\">\r\n            <h3><a target=\"_blank\" href=\"${builtData.event.localist_url}\">${builtData.event.title}</a></h3>\r\n            <h4 class=\"meta date\"><span class=\"start\">${builtData.event_time}</span></h4>\r\n            <h4 class=\"meta location\">${builtData.event.location_name}</h4>\r\n            <h4 class=\"meta type\"><span class=\"fa\"></span>${builtData.event_types}</h4>\r\n            <p class=\"description\">${builtData.description} \r\n                <a class=\"read-more more\" href=\"${builtData.event.localist_url}\" target=\"_blank\">${builtData.pref_readmore}</a>\r\n            </p>\r\n            ${builtData.addCal ? `${add_calender(builtData.event)}` : ''}  \r\n    </div><!--end of node -->`;\r\n\r\nexport const standardWrapper = (inner, args) => `\r\n    <section title=\"${args.title}\">\r\n        <h2>${args.heading}</h2>\r\n        <div id=\"main-body\">  \r\n            <div class=\"events-listing no-thumbnails\" id=\"events-listing\">\r\n                ${eventFilters(args.filters)}\r\n                <div class=\"events-list\">\r\n                    ${inner}\r\n                </div>\r\n            </div><!--events listing -->\r\n        </div><!-- main-body -->\r\n    </section><!--end of section -->`;\r\n\r\n/* \r\n    tests to see if month / day should be displayed \r\n    for calendar page format \r\n*/\r\nvar CheckDate = function( ){\r\n    var lastMonth = ''\r\n    var lastDay = ''\r\n    this.month = function(builtData){\r\n        if ( lastMonth != builtData.month){\r\n            lastMonth = builtData.month;\r\n            return `<h3 class=\"month-header\">${builtData.monthHeader}</h3>`;\r\n        }\r\n        return '';\r\n    }\r\n    this.day = function(builtData){\r\n        if (lastDay != builtData.displayDate){\r\n            lastDay = builtData.displayDate;\r\n            return `<h4 class=\"day-header\"><span class=\"fa fa-calendar-o\"></span>${builtData.displayDate}</h4>`;\r\n        }\r\n        return '';\r\n    }\r\n}\r\n\r\nvar checkDate = new CheckDate();\r\n\r\n","/* \r\n* filterObj has structer obj.name obj.id \r\n*/\r\nexport const eventFilters = (filterObjs) => {\r\n\r\n    //handles filter events\r\n    const toggleFilters = (id, target) => {\r\n        //remove active class from all filter buttons\r\n        var allFilterBtns = document.getElementsByClassName('filter-btn');\r\n        for (let value of allFilterBtns){\r\n            value.classList.remove('active');\r\n        }\r\n        var elem = document.getElementById(id);\r\n        //set the current item active\r\n        elem.classList.add('active');\r\n\r\n        //onclick button will only hide non target elements\r\n        //hide all filter elements\r\n        var allEvents = document.getElementsByClassName('event-node');\r\n        for (let value of allEvents){\r\n            value.classList.add('fadeOut');\r\n        }\r\n\r\n        //show the target elements\r\n        var targetElems = document.getElementsByClassName(target);\r\n        for (let value of targetElems){\r\n            value.classList.remove('fadeOut');\r\n        }\r\n    }\r\n    const showAllEvents = () => {\r\n        //remove active class from all filter buttons\r\n        var allFilterBtns = document.getElementsByClassName('filter-btn');\r\n        for (let value of allFilterBtns){\r\n            value.classList.remove('active');\r\n        }    \r\n        \r\n        var elem = document.getElementById('filterAll');\r\n        //set the current item active\r\n        elem.classList.add('active');\r\n\r\n        //show all filter elements\r\n        var allEvents = document.getElementsByClassName('event-node');\r\n        for (let value of allEvents){\r\n            value.classList.remove('fadeOut');\r\n        }    \r\n\r\n    }\r\n    // attach event handlers to window\r\n    window.toggleFilters = toggleFilters;\r\n    window.showAllEvents = showAllEvents;    \r\n    \r\n    return `\r\n        <div id=\"events-filters\"><h3 class=\"hidden\">Show:</h3>\r\n            <ul class=\"events-filters\">\r\n                <li><button id=\"filterAll\" data-filter=\"all\" class=\"filter-btn active\" onClick=\"showAllEvents()\">All Events</button></li>\r\n                ${filterObjs ? \r\n                    Object.keys(filterObjs).map( (key, index)=> `<li><button id='filter${filterObjs[key].id}' data-filter=\"${filterObjs[key].pref_category}-${filterObjs[key].id}\" class=\"filter-btn\" onclick=\"toggleFilters('filter${filterObjs[key].id}', '${filterObjs[key].pref_category}-${filterObjs[key].id}')\">${filterObjs[key].name}</button></li>`).join('')\r\n                :''}\r\n            </ul>\r\n        </div>\r\n    `;    \r\n            }  \r\n\r\nexport const add_calender = (myEvent) => {\r\n    /* ----------------- build calander links -------------------------- */\r\n    const buidGoogleStr=(myObj)=> {\r\n        let mySD = myObj.event_instances[0].event_instance.start.split('T')[0];\r\n        const gDateStart = mySD.split('-')[0] + mySD.split('-')[1] + mySD.split('-')[2];\r\n        //this may not work as intended for repeating events\r\n        let myED = myObj.last_date;\r\n        const gDateStop = myED.split('-')[0] + myED.split('-')[1] + myED.split('-')[2];\r\n        return `\r\n                <a class=\"fa fa-google google\" \r\n                    href='https://calendar.google.com/calendar/event?action=TEMPLATE&amp;dates=${gDateStart}%2F${gDateStop}&amp;details=${encodeURIComponent(myObj.description_text.replace(/[\\r\\n]/g, \"<br />\"))}&amp;location=${myObj.location}&amp;sprop=website%3Aevents.cornell.edu&amp;text=${myObj.title}' title=\"Save to Google Calendar\" target=\"_blank\">\r\n                <span class=\"sr-only\">Google Calendar</span>\r\n                </a>\r\n                `;\r\n    }\r\n\r\n    const buildiCal=(myObj)=> `\r\n                        <a class=\"fa fa-calendar apple\" href=\"${myObj.localist_ics_url}\" title=\"Save to iCal\" target=\"_blank\" >\r\n                        <span class='sr-only'>iCal</span>\r\n                        </a>\r\n                        `;\r\n\r\n    const buildOutlookCal=(myObj)=> `\r\n                        <a class=\"fa fa-clock-o microsoft\" href=\"${myObj.localist_ics_url}\" title=\"Save to Outlook\" target=\"_blank\" >\r\n                            <span class='sr-only'>Outlook</span>\r\n                        </a>\r\n                        `;\r\n\r\n    /* ------------------ END OF BUILD LINKS --------------------------- */    \r\n    return `<dd class=\"event-subscribe\" id=\"event_subscribe\">add to calendar\r\n            ${buidGoogleStr(myEvent)} ${buildiCal(myEvent)} ${buildOutlookCal(myEvent)}\r\n            </dd>`;\r\n}\r\n"],"sourceRoot":""}